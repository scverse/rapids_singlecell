[envs.default]
installer = "uv"
features = [ "dev" ]

[envs.docs]
features = [ "doc" ]
scripts.build = "sphinx-build -M html docs docs/_build {args}"
scripts.clean = "git clean -fXd docs"

[envs.default.pip]
extra_index_urls = [
    "https://pypi.nvidia.com",
]

[envs.hatch-test]
default-args = [  ]
features = [ "test", "rapids12" ]

overrides.matrix.deps.env-vars = [
    { if = [
        "dev",
    ], key = "UV_PRERELEASE", value = "allow" },
]

overrides.matrix.deps.python = [
    { if = [ "stable" ], value = "3.12" },
    { if = [ "dev" ], value = "3.13" },
]

overrides.matrix.deps.extra-dependencies = [
    { if = [
        "dev",
    ], value = "anndata @ git+https://github.com/scverse/anndata.git" },
    { if = [
        "dev",
    ], value = "scanpy @ git+https://github.com/scverse/scanpy.git" },
]

[[envs.hatch-test.matrix]]
deps = [ "stable", "dev" ]
