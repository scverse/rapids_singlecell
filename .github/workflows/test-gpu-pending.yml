name: GPU Tests Pending

on:
  pull_request:
    types:
      - opened
      - synchronize

jobs:
  set-pending:
    name: GPU Tests Pending
    runs-on: ubuntu-latest
    permissions:
      statuses: write
    steps:
      - name: Set pending status on PR
        run: |
          for context in "CI-Pass" "All Tests Green"; do
            gh api repos/${{ github.repository }}/statuses/${{ github.event.pull_request.head.sha }} \
              -f state=pending \
              -f context="$context" \
              -f description="Waiting for /test-gpu command..."
          done
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
